{"ast":null,"code":"var _excluded = [\"children\", \"className\", \"disabledTabClassName\", \"domRef\", \"focus\", \"forceRenderTabPanel\", \"onSelect\", \"selectedIndex\", \"selectedTabClassName\", \"selectedTabPanelClassName\", \"environment\", \"disableUpDownKeys\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport PropTypes from \"prop-types\";\nimport React, { cloneElement, useRef, useId } from \"react\";\nimport cx from \"clsx\";\nimport { childrenPropType } from \"../helpers/propTypes\";\nimport { getTabsCount as getTabsCountHelper } from \"../helpers/count\";\nimport { deepMap } from \"../helpers/childrenDeepMap\";\nimport { isTabList, isTabPanel, isTab } from \"../helpers/elementTypes\";\n\nfunction isNode(node) {\n  return node && \"getAttribute\" in node;\n}\n\nfunction isTabNode(node) {\n  return isNode(node) && node.getAttribute(\"data-rttab\");\n}\n\nfunction isTabDisabled(node) {\n  return isNode(node) && node.getAttribute(\"aria-disabled\") === \"true\";\n}\n\nvar canUseActiveElement;\n\nfunction determineCanUseActiveElement(environment) {\n  var env = environment || (typeof window !== \"undefined\" ? window : undefined);\n\n  try {\n    canUseActiveElement = !!(typeof env !== \"undefined\" && env.document && env.document.activeElement);\n  } catch (e) {\n    canUseActiveElement = false;\n  }\n}\n\nvar defaultProps = {\n  className: \"react-tabs\",\n  focus: false\n};\nvar propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: childrenPropType,\n  direction: PropTypes.oneOf([\"rtl\", \"ltr\"]),\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.object]),\n  disabledTabClassName: PropTypes.string,\n  disableUpDownKeys: PropTypes.bool,\n  domRef: PropTypes.func,\n  focus: PropTypes.bool,\n  forceRenderTabPanel: PropTypes.bool,\n  onSelect: PropTypes.func.isRequired,\n  selectedIndex: PropTypes.number.isRequired,\n  selectedTabClassName: PropTypes.string,\n  selectedTabPanelClassName: PropTypes.string,\n  environment: PropTypes.object\n} : {};\n\nvar UncontrolledTabs = function UncontrolledTabs(props) {\n  var tabNodes = useRef([]);\n  var tabIds = useRef([]);\n\n  var _ref = useRef();\n\n  function setSelected(index, event) {\n    if (index < 0 || index >= getTabsCount()) return;\n    var onSelect = props.onSelect,\n        selectedIndex = props.selectedIndex;\n    onSelect(index, selectedIndex, event);\n  }\n\n  function getNextTab(index) {\n    var count = getTabsCount();\n\n    for (var i = index + 1; i < count; i++) {\n      if (!isTabDisabled(getTab(i))) {\n        return i;\n      }\n    }\n\n    for (var _i = 0; _i < index; _i++) {\n      if (!isTabDisabled(getTab(_i))) {\n        return _i;\n      }\n    }\n\n    return index;\n  }\n\n  function getPrevTab(index) {\n    var i = index;\n\n    while (i--) {\n      if (!isTabDisabled(getTab(i))) {\n        return i;\n      }\n    }\n\n    i = getTabsCount();\n\n    while (i-- > index) {\n      if (!isTabDisabled(getTab(i))) {\n        return i;\n      }\n    }\n\n    return index;\n  }\n\n  function getFirstTab() {\n    var count = getTabsCount();\n\n    for (var i = 0; i < count; i++) {\n      if (!isTabDisabled(getTab(i))) {\n        return i;\n      }\n    }\n\n    return null;\n  }\n\n  function getLastTab() {\n    var i = getTabsCount();\n\n    while (i--) {\n      if (!isTabDisabled(getTab(i))) {\n        return i;\n      }\n    }\n\n    return null;\n  }\n\n  function getTabsCount() {\n    var children = props.children;\n    return getTabsCountHelper(children);\n  }\n\n  function getTab(index) {\n    return tabNodes.current[\"tabs-\" + index];\n  }\n\n  function getChildren() {\n    var index = 0;\n    var children = props.children,\n        disabledTabClassName = props.disabledTabClassName,\n        focus = props.focus,\n        forceRenderTabPanel = props.forceRenderTabPanel,\n        selectedIndex = props.selectedIndex,\n        selectedTabClassName = props.selectedTabClassName,\n        selectedTabPanelClassName = props.selectedTabPanelClassName,\n        environment = props.environment;\n    tabIds.current = tabIds.current || [];\n    var diff = tabIds.current.length - getTabsCount();\n    var id = useId();\n\n    while (diff++ < 0) {\n      tabIds.current.push(\"\" + id + tabIds.current.length);\n    }\n\n    return deepMap(children, function (child) {\n      var result = child;\n\n      if (isTabList(child)) {\n        var listIndex = 0;\n        var wasTabFocused = false;\n\n        if (canUseActiveElement == null) {\n          determineCanUseActiveElement(environment);\n        }\n\n        var env = environment || (typeof window !== \"undefined\" ? window : undefined);\n\n        if (canUseActiveElement && env) {\n          wasTabFocused = React.Children.toArray(child.props.children).filter(isTab).some(function (tab, i) {\n            return env.document.activeElement === getTab(i);\n          });\n        }\n\n        result = cloneElement(child, {\n          children: deepMap(child.props.children, function (tab) {\n            var key = \"tabs-\" + listIndex;\n            var selected = selectedIndex === listIndex;\n            var props = {\n              tabRef: function tabRef(node) {\n                tabNodes.current[key] = node;\n              },\n              id: tabIds.current[listIndex],\n              selected: selected,\n              focus: selected && (focus || wasTabFocused)\n            };\n            if (selectedTabClassName) props.selectedClassName = selectedTabClassName;\n            if (disabledTabClassName) props.disabledClassName = disabledTabClassName;\n            listIndex++;\n            return cloneElement(tab, props);\n          })\n        });\n      } else if (isTabPanel(child)) {\n        var _props = {\n          id: tabIds.current[index],\n          selected: selectedIndex === index\n        };\n        if (forceRenderTabPanel) _props.forceRender = forceRenderTabPanel;\n        if (selectedTabPanelClassName) _props.selectedClassName = selectedTabPanelClassName;\n        index++;\n        result = cloneElement(child, _props);\n      }\n\n      return result;\n    });\n  }\n\n  function handleKeyDown(e) {\n    var direction = props.direction,\n        disableUpDownKeys = props.disableUpDownKeys;\n\n    if (isTabFromContainer(e.target)) {\n      var index = props.selectedIndex;\n      var preventDefault = false;\n      var useSelectedIndex = false;\n\n      if (e.code === \"Space\" || e.keyCode === 32 || e.code === \"Enter\" || e.keyCode === 13) {\n        preventDefault = true;\n        useSelectedIndex = false;\n        handleClick(e);\n      }\n\n      if (e.code === \"ArrowLeft\" || e.keyCode === 37 || !disableUpDownKeys && (e.keyCode === 38 || e.code === \"ArrowUp\")) {\n        if (direction === \"rtl\") {\n          index = getNextTab(index);\n        } else {\n          index = getPrevTab(index);\n        }\n\n        preventDefault = true;\n        useSelectedIndex = true;\n      } else if (e.code === \"ArrowRight\" || e.keyCode === 39 || !disableUpDownKeys && (e.keyCode === 40 || e.code === \"ArrowDown\")) {\n        if (direction === \"rtl\") {\n          index = getPrevTab(index);\n        } else {\n          index = getNextTab(index);\n        }\n\n        preventDefault = true;\n        useSelectedIndex = true;\n      } else if (e.keyCode === 35 || e.code === \"End\") {\n        index = getLastTab();\n        preventDefault = true;\n        useSelectedIndex = true;\n      } else if (e.keyCode === 36 || e.code === \"Home\") {\n        index = getFirstTab();\n        preventDefault = true;\n        useSelectedIndex = true;\n      }\n\n      if (preventDefault) {\n        e.preventDefault();\n      }\n\n      if (useSelectedIndex) {\n        setSelected(index, e);\n      }\n    }\n  }\n\n  function handleClick(e) {\n    var node = e.target;\n\n    do {\n      if (isTabFromContainer(node)) {\n        if (isTabDisabled(node)) {\n          return;\n        }\n\n        var index = [].slice.call(node.parentNode.children).filter(isTabNode).indexOf(node);\n        setSelected(index, e);\n        return;\n      }\n    } while ((node = node.parentNode) != null);\n  }\n\n  function isTabFromContainer(node) {\n    if (!isTabNode(node)) {\n      return false;\n    }\n\n    var nodeAncestor = node.parentElement;\n\n    do {\n      if (nodeAncestor === _ref.current) return true;\n      if (nodeAncestor.getAttribute(\"data-rttabs\")) break;\n      nodeAncestor = nodeAncestor.parentElement;\n    } while (nodeAncestor);\n\n    return false;\n  }\n\n  var children = props.children,\n      className = props.className,\n      disabledTabClassName = props.disabledTabClassName,\n      domRef = props.domRef,\n      focus = props.focus,\n      forceRenderTabPanel = props.forceRenderTabPanel,\n      onSelect = props.onSelect,\n      selectedIndex = props.selectedIndex,\n      selectedTabClassName = props.selectedTabClassName,\n      selectedTabPanelClassName = props.selectedTabPanelClassName,\n      environment = props.environment,\n      disableUpDownKeys = props.disableUpDownKeys,\n      attributes = _objectWithoutPropertiesLoose(props, _excluded);\n\n  return React.createElement(\"div\", Object.assign({}, attributes, {\n    className: cx(className),\n    onClick: handleClick,\n    onKeyDown: handleKeyDown,\n    ref: function ref(node) {\n      _ref.current = node;\n      if (domRef) domRef(node);\n    },\n    \"data-rttabs\": true\n  }), getChildren());\n};\n\nUncontrolledTabs.defaultProps = defaultProps;\nUncontrolledTabs.propTypes = process.env.NODE_ENV !== \"production\" ? propTypes : {};\nexport default UncontrolledTabs;","map":null,"metadata":{},"sourceType":"module"}